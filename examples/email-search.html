<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Email Search - PTG Design System</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../dist/css/tokens.css">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-family-primary);
      background-color: var(--classic-clean-background);
      color: var(--classic-clean-text);
      line-height: var(--line-height-md);
      min-height: 100vh;
    }

    .container {
      max-width: calc(var(--spacing-max-width-large) * 1px);
      margin: 0 auto;
      padding: calc(var(--spacing-page-padding-compact) * 1px);
    }

    header {
      padding: calc(var(--spacing-section-padding-small) * 1px) 0;
      border-bottom: calc(var(--stroke-border-width) * 1px) solid var(--classic-clean-border);
      margin-bottom: calc(var(--spacing-section-padding-small) * 1px);
    }

    h1 {
      font-size: calc(var(--font-heading-sm) * 1px);
      font-weight: var(--font-weight-bold);
      margin-bottom: calc(var(--spacing-button-padding-medium) * 1px);
    }

    .search-box {
      display: flex;
      gap: calc(var(--spacing-button-padding-medium) * 1px);
      margin-bottom: calc(var(--spacing-button-padding-medium) * 1px);
    }

    .search-input {
      flex: 1;
      padding: calc(var(--spacing-button-padding-medium) * 1px);
      font-size: calc(var(--font-body-sm) * 1px);
      font-family: var(--font-family-primary);
      border: calc(var(--stroke-border-width) * 1px) solid var(--color-neutral-lighter);
      border-radius: var(--radius-input);
      background: var(--classic-clean-foreground);
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .search-input:focus {
      border-color: var(--classic-clean-accent);
      box-shadow: var(--shadow-small);
    }

    .search-input::placeholder {
      color: var(--color-neutral-base);
    }

    .search-btn {
      padding: calc(var(--spacing-button-padding-medium) * 1px) calc(var(--spacing-page-padding-compact) * 1px);
      font-size: calc(var(--font-body-sm) * 1px);
      font-family: var(--font-family-primary);
      font-weight: var(--font-weight-semi-bold);
      background-color: var(--classic-clean-accent);
      color: var(--color-brand-onyx);
      border: none;
      border-radius: var(--radius-button);
      cursor: pointer;
      transition: opacity 0.2s, box-shadow 0.2s;
    }

    .search-btn:hover {
      opacity: 0.9;
      box-shadow: var(--shadow-medium);
    }

    .filters {
      display: flex;
      gap: calc(var(--spacing-button-padding-medium) * 1px);
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: calc(var(--spacing-button-padding-small) * 1px) calc(var(--spacing-button-padding-medium) * 1px);
      font-size: calc(var(--font-body-xs) * 1px);
      font-family: var(--font-family-primary);
      background: transparent;
      border: calc(var(--stroke-border-width) * 1px) solid var(--color-neutral-lighter);
      border-radius: var(--radius-button);
      cursor: pointer;
      transition: all 0.2s;
    }

    .filter-btn:hover {
      border-color: var(--classic-clean-accent);
    }

    .filter-btn.active {
      background-color: var(--opacity-gold-20);
      border-color: var(--classic-clean-accent);
    }

    .results-info {
      font-size: calc(var(--font-body-xs) * 1px);
      color: var(--color-neutral-base);
      margin-bottom: calc(var(--spacing-button-padding-medium) * 1px);
    }

    .email-list {
      display: flex;
      flex-direction: column;
      gap: calc(var(--spacing-button-padding-medium) * 1px);
    }

    .email-card {
      background: var(--classic-clean-foreground);
      border: calc(var(--stroke-border-width) * 1px) solid var(--classic-clean-border);
      border-radius: var(--radius-card);
      padding: calc(var(--spacing-button-padding-medium) * 1px);
      cursor: pointer;
      transition: box-shadow 0.2s, border-color 0.2s;
    }

    .email-card:hover {
      box-shadow: var(--shadow-medium);
      border-color: var(--color-neutral-lighter);
    }

    .email-card.unread {
      border-left: 3px solid var(--classic-clean-accent);
    }

    .email-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: calc(var(--spacing-button-padding-small) * 1px);
    }

    .email-from {
      font-size: calc(var(--font-body-sm) * 1px);
      font-weight: var(--font-weight-semi-bold);
    }

    .email-card.unread .email-from {
      font-weight: var(--font-weight-bold);
    }

    .email-date {
      font-size: calc(var(--font-body-xxs) * 1px);
      color: var(--color-neutral-base);
    }

    .email-subject {
      font-size: calc(var(--font-body-sm) * 1px);
      margin-bottom: calc(var(--spacing-button-padding-small) * 1px);
    }

    .email-card.unread .email-subject {
      font-weight: var(--font-weight-semi-bold);
    }

    .email-preview {
      font-size: calc(var(--font-body-xs) * 1px);
      color: var(--color-neutral-base);
      line-height: var(--line-height-sm);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .email-tags {
      display: flex;
      gap: calc(var(--spacing-button-padding-small) * 1px);
      margin-top: calc(var(--spacing-button-padding-small) * 1px);
    }

    .tag {
      font-size: calc(var(--font-body-xxs) * 1px);
      padding: 2px calc(var(--spacing-button-padding-small) * 1px);
      background: var(--opacity-neutral-darkest-5);
      border-radius: var(--radius-small);
    }

    .tag.important {
      background: var(--opacity-gold-20);
      color: var(--color-brand-onyx);
    }

    .no-results {
      text-align: center;
      padding: calc(var(--spacing-section-padding-small) * 1px);
      color: var(--color-neutral-base);
    }

    .no-results-icon {
      font-size: calc(var(--font-heading-lg) * 1px);
      margin-bottom: calc(var(--spacing-button-padding-medium) * 1px);
    }

    .highlight {
      background-color: var(--opacity-gold-30);
      padding: 0 2px;
    }

    @media (max-width: 600px) {
      .search-box {
        flex-direction: column;
      }

      .search-btn {
        width: 100%;
      }

      .email-header {
        flex-direction: column;
        gap: calc(var(--spacing-button-padding-small) * 1px);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Email Search</h1>
      <div class="search-box">
        <input
          type="text"
          class="search-input"
          placeholder="Search emails by subject, sender, or content..."
          id="searchInput"
          autofocus
        >
        <button class="search-btn" id="searchBtn">Search</button>
      </div>
      <div class="filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="unread">Unread</button>
        <button class="filter-btn" data-filter="important">Important</button>
        <button class="filter-btn" data-filter="work">Work</button>
        <button class="filter-btn" data-filter="personal">Personal</button>
      </div>
    </header>

    <main>
      <div class="results-info" id="resultsInfo"></div>
      <div class="email-list" id="emailList"></div>
    </main>
  </div>

  <script>
    const emails = [
      {
        id: 1,
        from: "Sarah Johnson",
        email: "sarah.johnson@company.com",
        subject: "Q4 Project Update - Action Required",
        preview: "Hi team, I wanted to share the latest updates on our Q4 project milestones. We've made significant progress on the user interface redesign and the backend API integration is nearly complete. Please review the attached documents and provide your feedback by Friday.",
        date: "2024-01-15",
        unread: true,
        tags: ["work", "important"]
      },
      {
        id: 2,
        from: "Mike Chen",
        email: "mike.chen@techfirm.io",
        subject: "Meeting rescheduled to Thursday",
        preview: "Hey, just a quick heads up that our sync meeting has been moved to Thursday at 2pm. Same conference room, same agenda. Let me know if that works for your schedule.",
        date: "2024-01-14",
        unread: true,
        tags: ["work"]
      },
      {
        id: 3,
        from: "Amazon",
        email: "shipping@amazon.com",
        subject: "Your order has shipped!",
        preview: "Great news! Your order #123-4567890 has shipped and is on its way. Estimated delivery: January 17th. Track your package using the link below.",
        date: "2024-01-14",
        unread: false,
        tags: ["personal"]
      },
      {
        id: 4,
        from: "Design Team",
        email: "design@company.com",
        subject: "New brand guidelines released",
        preview: "We're excited to announce the release of our updated brand guidelines. The new design system includes refreshed color palettes, typography standards, and component specifications.",
        date: "2024-01-13",
        unread: false,
        tags: ["work", "important"]
      },
      {
        id: 5,
        from: "LinkedIn",
        email: "notifications@linkedin.com",
        subject: "5 people viewed your profile",
        preview: "Your profile is getting attention! See who's been checking out your professional profile this week and discover new connection opportunities.",
        date: "2024-01-13",
        unread: false,
        tags: ["personal"]
      },
      {
        id: 6,
        from: "HR Department",
        email: "hr@company.com",
        subject: "Benefits enrollment reminder",
        preview: "This is a friendly reminder that the benefits enrollment period ends on January 31st. Please log into the HR portal to review and confirm your selections for the upcoming year.",
        date: "2024-01-12",
        unread: true,
        tags: ["work", "important"]
      },
      {
        id: 7,
        from: "Netflix",
        email: "info@netflix.com",
        subject: "New shows you might like",
        preview: "Based on your viewing history, we think you'll love these new additions to our catalog. Check out the latest releases in drama, comedy, and documentary genres.",
        date: "2024-01-12",
        unread: false,
        tags: ["personal"]
      },
      {
        id: 8,
        from: "Tech Support",
        email: "support@company.com",
        subject: "Your ticket #4521 has been resolved",
        preview: "We've addressed the VPN connectivity issue you reported. The problem was related to a certificate expiration. Please try connecting again and let us know if you experience any further issues.",
        date: "2024-01-11",
        unread: false,
        tags: ["work"]
      },
      {
        id: 9,
        from: "Julia Martinez",
        email: "julia.m@email.com",
        subject: "Dinner plans for Saturday?",
        preview: "Hey! Are you free this Saturday for dinner? I was thinking we could try that new Italian place downtown. Let me know what time works for you!",
        date: "2024-01-11",
        unread: true,
        tags: ["personal"]
      },
      {
        id: 10,
        from: "Project Manager",
        email: "pm@company.com",
        subject: "Sprint retrospective notes",
        preview: "Attached are the notes from yesterday's sprint retrospective. Key action items include improving our code review process and setting up automated testing pipelines.",
        date: "2024-01-10",
        unread: false,
        tags: ["work"]
      }
    ];

    let currentFilter = "all";
    let searchQuery = "";

    function formatDate(dateStr) {
      const date = new Date(dateStr);
      const today = new Date();
      const diff = Math.floor((today - date) / (1000 * 60 * 60 * 24));

      if (diff === 0) return "Today";
      if (diff === 1) return "Yesterday";
      if (diff < 7) return date.toLocaleDateString("en-US", { weekday: "short" });
      return date.toLocaleDateString("en-US", { month: "short", day: "numeric" });
    }

    function highlightText(text, query) {
      if (!query) return text;
      const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, "gi");
      return text.replace(regex, '<span class="highlight">$1</span>');
    }

    function filterEmails() {
      return emails.filter(email => {
        const matchesFilter = currentFilter === "all" ||
          (currentFilter === "unread" && email.unread) ||
          email.tags.includes(currentFilter);

        const query = searchQuery.toLowerCase();
        const matchesSearch = !query ||
          email.from.toLowerCase().includes(query) ||
          email.email.toLowerCase().includes(query) ||
          email.subject.toLowerCase().includes(query) ||
          email.preview.toLowerCase().includes(query);

        return matchesFilter && matchesSearch;
      });
    }

    function renderEmails() {
      const filtered = filterEmails();
      const emailList = document.getElementById("emailList");
      const resultsInfo = document.getElementById("resultsInfo");

      resultsInfo.textContent = `${filtered.length} email${filtered.length !== 1 ? 's' : ''} found`;

      if (filtered.length === 0) {
        emailList.innerHTML = `
          <div class="no-results">
            <div class="no-results-icon">&#128269;</div>
            <p>No emails match your search criteria</p>
          </div>
        `;
        return;
      }

      emailList.innerHTML = filtered.map(email => `
        <article class="email-card ${email.unread ? 'unread' : ''}" data-id="${email.id}">
          <div class="email-header">
            <span class="email-from">${highlightText(email.from, searchQuery)}</span>
            <span class="email-date">${formatDate(email.date)}</span>
          </div>
          <div class="email-subject">${highlightText(email.subject, searchQuery)}</div>
          <div class="email-preview">${highlightText(email.preview, searchQuery)}</div>
          <div class="email-tags">
            ${email.tags.map(tag => `<span class="tag ${tag === 'important' ? 'important' : ''}">${tag}</span>`).join('')}
          </div>
        </article>
      `).join('');
    }

    document.querySelectorAll(".filter-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        document.querySelectorAll(".filter-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        currentFilter = btn.dataset.filter;
        renderEmails();
      });
    });

    document.getElementById("searchInput").addEventListener("input", (e) => {
      searchQuery = e.target.value;
      renderEmails();
    });

    document.getElementById("searchInput").addEventListener("keypress", (e) => {
      if (e.key === "Enter") {
        renderEmails();
      }
    });

    document.getElementById("searchBtn").addEventListener("click", renderEmails);

    document.getElementById("emailList").addEventListener("click", (e) => {
      const card = e.target.closest(".email-card");
      if (card) {
        const id = parseInt(card.dataset.id);
        const email = emails.find(e => e.id === id);
        if (email) {
          email.unread = false;
          card.classList.remove("unread");
        }
      }
    });

    renderEmails();
  </script>
</body>
</html>
